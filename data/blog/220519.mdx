---
title: 220519 Today I Learned
date: "2022-05-19"
tags:
  [
    "daily",
    "study",
    "javascript",
    "apollo",
    "graphql",
    "instaclone",
    "nomadcoders",
    "speak",
    "hbr",
    "wsj",
  ]
draft: false
summary:
images: []
layout: PostLayout
---

<br />

# Today Plan

- [x] DeepDive # finish
- [x] Newpresoo HBR Reading 2 chapter
- [x] Speak 2 chapter
- [ ] InstaClone 15.5 ~

<br />

# DeepDive JS Finish ğŸš€

[INDEX](https://github.com/geonya/books/blob/master/deepdive-javascript/README.md)

<br /># InstaClone{" "}

## 15.5 FlatList

- ë¦¬ì•¡íŠ¸ ë„¤ì´í‹°ë¸Œì— ìŠ¤í¬ë¡¤ë·° ScrollView ëŠ” ê¸´ ë¦¬ìŠ¤íŠ¸ë¥¼ ì²˜ë¦¬í•  ë•Œ ì„±ëŠ¥ì´ ì¢‹ì§€ ì•Šë‹¤
- FlatList ëŠ” Lazy Loading ì´ë¼ëŠ” ìœ ìš©í•œ ê¸°ëŠ¥ì„ ê°€ì§€ê³  ìˆìŒ
- ë¦¬ìŠ¤íŠ¸ì— ìˆëŠ” ëª¨ë“  ì»´í¬ë„ŒíŠ¸ë“¤ì„ í•œ ë²ˆì— ë¶ˆëŸ¬ì˜¤ëŠ” ê²Œ ì•„ë‹ˆë¼ í™”ë©´ì— ë³´ì´ëŠ” ê²ƒë§Œ ìˆœì°¨ì ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¤ëŠ” ê²ƒì„
- FlatList ì— renderItem ì„ í•¨ìˆ˜ë¡œ ë¶„ë¦¬í•´ì„œ ì‘ì„±í•  ë•Œ item ì¸ìì˜ íƒ€ì…ì„ ì–´ë–»ê²Œ ì •í•´ì¤˜ì•¼ í•˜ë‚˜ ê³ ë¯¼ í–ˆëŠ”ë° ë‹µì„ ëª»ì°¾ì•˜ë‹¤.
- seeFeedQuery ë‚´ì— seeFeed ë°°ì—´ íƒ€ì…ì˜ ìš”ì†Œ íƒ€ì…ë§Œ ê°€ì ¸ì˜¤ë©´ ë˜ëŠ”ë° ë°©ë²•ì„ ëª¨ë¥´ê² ìŒ

## 15.6 Photo 1

- PhotoList ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ì–´ renderItem ì´ Photo List ë¥¼ ë¦¬í„´í•˜ë„ë¡ í•œë‹¤.
- Photo ë°ì´í„°ë“¤ì„ ì»´í¬ë„ŒíŠ¸ë¡œ ì „ë‹¬í•  ìˆ˜ ìˆë„ë¡ interfaceë¥¼ ì‘ì„±í•œë‹¤. (seeFeed ë°°ì—´ì—ì„œ êº¼ë‚´ì˜¤ë©´ ë˜ëŠ”ë°â€¦ ë°©ë²•ì„ ëª°ë¼ ì–´ì©” ìˆ˜ ì—†ì´ scheme type ì„ ê¸ì–´ì™”ë‹¤.)
- PhotoList ì»´í¬ë„ŒíŠ¸ì˜ ë ˆì´ì•„ì›ƒì„ ì¡ì•„ì¤€ë‹¤.

```js
const { width, height } = useWindowDimensions();
```

- useWindowDimensions ì€ í•´ë‹¹ ë¯¸ë””ì–´ ìŠ¤í¬ë¦° í™”ë©´ì˜ ì‚¬ì´ì¦ˆë¥¼ ê°€ì ¸ì˜¨ë‹¤.

## 15.7 Photo 2

- Photo List ì»´í¬ë„ŒíŠ¸ì— Header ë¶€ë¶„ì„ ëª¨ë‘ TouchableOpacity ë¡œ ì„¤ì •í•˜ê³  onPress ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¡œ navigation.navigate ë¥¼ ë“±ë¡í–ˆë‹¤.

```js
<Header onPress={() => navigation.navigate("Profile")}>
```

- ë¬¸ì œëŠ” navigation ì— navigate ì¸ì "Profile" íƒ€ì…ì´ ê²€ì¦ì´ ì•ˆëœë‹¤ëŠ” ê²ƒ...

```tsx
const navigation: NativeStackNavigationProp<
	StackNavFactoryParamList,
	"Feed",
	undefined
> = useNavigation();
```

- ì´ë ‡ê²Œ Navigation propì„ íƒ€ì…ì„ ì ìš©í•˜ë©´ í•´ê²°ëœë‹¤.

```js
useEffect(() => {
	Image.getSize(file, (imageWidth, imageHeight) => {
		if (imageHeight > screenHeight) {
			setImageHeight(imageHeight / 3);
		} else {
			setImageHeight(screenHeight - 450);
		}
	});
}, [file]);
```

- í¬ê¸°ê°€ ì‘ì€ ì‚¬ì§„ë“¤ì€ /3 í•  ê²½ìš° ë„ˆë¬´ ì˜ë ¤ë³´ì—¬ì„œ ì‚¬ì´ì¦ˆë§ˆë‹¤ í¬ê¸° ì ìš©ì„ ë‹¬ë¦¬í•˜ë„ë¡ í•˜ì˜€ë‹¤.
- Action ì— Likes ì™€ Comments ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤.
- IonIcons ë¥¼ ì ìš©í•œë‹¤.
- onPress ë¡œ í•´ë‹¹ ìŠ¤í¬ë¦°ìœ¼ë¡œ ì´ë™í•˜ë„ë¡ í•œë‹¤. (Stack Navigator ì— ë“±ë¡í•˜ëŠ” ê²ƒ ìŠì§€ ë§ê¸°!)

## 15.9 Pull to Refresh

- í™”ë©´ ì•„ë˜ë¡œ ë•¡ê²¨ì„œ ìƒˆë¡œê³ ì¹¨ í•˜ê¸°
- FlatList ì— refreshing ê³¼ onFresh propì„ ì´ìš©í•œë‹¤.
- refreshing ì€ Viewê°€ active refresh(ë¡œë”© í‘œì‹œ)ë¥¼ í‘œì‹œí•´ì•¼ í•˜ëŠ”ì§€ ì—¬ë¶€ë¡œ boolean ê°’ì„ ë°›ëŠ”ë‹¤.
- onRefresh ëŠ” Viewê°€ refreshë¥¼ ì‹œì‘í•  ë•Œ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜ì´ë‹¤.
- onRefresh ì— useQuery ì˜ refetch í•¨ìˆ˜ë¥¼ ë„£ì–´ dataë¥¼ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜¤ë„ë¡ í•œë‹¤.
- (refetch ëŠ” query ë¥¼ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜¤ëŠ” function ì´ë‹¤.)
- useState ë¥¼ ì´ìš©í•´ loading stateë¥¼ ë§Œë“¤ì–´ì„œ refresh ë¥¼ async await ìœ¼ë¡œ refetch í•¨ìˆ˜ë¥¼ ë™ê¸°ì²˜ë¦¬ í•˜ë©° setState í•œë‹¤.

## 15.10 Infinite Scrolling part One

- onEndReached : ìŠ¤í¬ë¡¤ ëê¹Œì§€ ê°”ì„ ë•Œ ì‘ë™í•˜ëŠ” í•¨ìˆ˜
- onEndReachedThreshold : onEndReached ì–¸ì œ ì‘ë™í•  ê²ƒì¸ì§€ ìŠ¤í¬ë¡¤ ëì—ì„œ ì‘ë™ ì§€ì ê¹Œì§€ì˜ ê±°ë¦¬ë¥¼ ì§€ì •í•´ì¤Œ
- fetchMore : fetch ë¥¼ ì¶”ê°€ë¡œ ê³„ì† í•´ë‚˜ê°ˆ ë•Œ ì‚¬ìš©í•¨

## 15.11 Infinite Scrolling part Two

- fetchMore ë¥¼ ì œëŒ€ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„  ì¶”ê°€ëœ ë°ì´í„°ë¥¼ cacheì— ë°˜ì˜í•´ì•¼í•¨

```tsx
const client = new ApolloClient({
	link: authLink.concat(httpLink),
	cache: new InMemoryCache({
		typePolicies: {
			Query: {
				fields: {
					seeFeed: {
						keyArgs: false,
						merge: (existing = [], incoming = []) => [...existing, ...incoming],
					},
				},
			},
		},
	}),
});
```

- `keyArgs: false,` // apolloê°€ query ë“¤ì„ argument ì— ë”°ë¼ êµ¬ë³„ì‹œí‚¤ëŠ” ê²ƒì„ ë§‰ì•„ì¤€ë‹¤
- `merge: (existing = [], incoming = []) => [...existing, ...incoming],` // ê¸°ì¡´ ë°ì´í„°ì™€ fetchMore ì—ì„œ ê°€ì ¸ì˜¨ ë°ì´í„°ë¥¼ í•©ì¹œë‹¤. ê·¸ë˜ì•¼ ìì—°ìŠ¤ëŸ½ê²Œ ìŠ¤í¬ë¡¤ë§ì´ ê°€ëŠ¥í•˜ë‹¤.

```tsx
Query: {
				fields: {
					seeFeed: offsetLimitPagination(),
				},
			},
```

- ìœ„ ì½”ë“œëŠ” offsetLimitPagination í•¨ìˆ˜ë¥¼ ì´ìš©í•´ ì´ë ‡ê²Œ ê¹”ë”í•˜ê²Œ ì •ë¦¬í•  ìˆ˜ ìˆë‹¤. (ë™ì¼í•œ ê¸°ëŠ¥)
